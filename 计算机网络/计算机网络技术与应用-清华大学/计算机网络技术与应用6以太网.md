---
title: 网络技术与基础6以太网
date: 2017-05-03
tags: [计算机网络,MOOC]
categories:　MOOC学习总结
---

# 网络技术与基础6以太网
<br/>   －-总结自<学堂在线>清华大学.网路技术与基础课程学习

* 特征：用一种物理介质将比特流传输到各个站点

*以太网的发展过程:
    * 传输媒体从采用同轴电缆到双绞线缆和光纤
    * 从共享(总线)式以太网发展到交换式以太网
    * 出现VLAN和三层交换技术
    * 从低速以太网发展到高速以太网

## 总线型以太网
* 拓扑结构：所有终端连接在传输信号的共享总线上，信号通过总线向两边传输，总线具有匹配阻抗(中继器可以完成信号再生，延长总线的传播距离)
> (阻抗匹配（impedance matching）:信号源内阻与所接传输线的特性阻抗大小相等且相位相同，或传输线的特性阻抗与所接负载阻抗的大小相等且相位相同，分别称为传输线的输入端或输出端处于阻抗匹配状态，简称为阻抗匹配。否则，便称为阻抗失配)

* 数据封装：将辅助信息和数据封装为帧的形式.从一串二进制位流中正确提取出每一帧称为帧对界。
> (发送终端:把构成帧的二进制位流转换成信号/接收终端:把从总线上接收到的信号转换成一串二进制位流)
* 传输方式：传输媒体为同轴电缆的半双工通信,因而发送终端，总线状态空闲才能发送；对于接收终端，总线上有数据才接收
* 公平竞争总线的机制（保证只有一个终端能够成功发送数据,而且每一个终端成功发送数据的几率还要是均等的）
* 寻址：每一个终端能够判别自己是否是数据的接收者,当确定自己是数据接收者的时候才接收。
* 体系结构：基于以太网的TCP/IP体系结构将传输网络以太网分为MAC层(主要完成寻址，公平竞争总线和数据封装)和物理层(主要完成帧对界，数据与信号的转换和检测总线的状态)



## 传输方式
### 基带传输:
* 基带传输:就是用基带信号（即幅度只有两种离散值的数字信号）实现数据传输的方式，包括幅度和宽度，利用发送时钟控制码元长度，利用接收时钟的跳变时刻检测接收到的信号值。
* 表示:二进制数的单位是二进制位,基带信号的单位是码元。对基带信号来说,码元就是一个二进制位所对应的信号,码元长度(等于时钟周期)=1/数据传输速率（时钟频率）

### 曼彻斯特编码
* 曼彻斯特编码：为解决误差累计，将一个码元长度内的信号分为前后两部分，利用周期内的跳变表示信号，上升沿表示数字1，下降沿表示数据0(没有跳变说明总线空闲)
> (校正指的让接收端的时钟周期开始位置与码元的起始位置一致。码元的起始位置可以通过跳变让接收端检测到。)
* 波特率=2×数据传输速率，波特率的提高对信道的带宽要求提高了，当传输速率提高到100Mbps以上的时候,就不用曼切斯特编码了。
* 帧对界：曼彻斯特编码使得总线数据传输状态和空闲状态是不同的，两个帧之间至少存在一段总线空闲时间，从而把属于每一帧的二进制位流分割开


## 数据封装格式:MAC帧
* MAC地址：终端利用MAC地址唯一标识，6个字节(48位二进制位)，又分为单播地址(最后一位为0)/组播地址(最后一位为1)/广播地址(48位全1)
* MAC帧格式:先导码+帧开始分解符+目的地址+源地址+数据类型+数据+FCS
    * 目标地址/源地址使用MAC地址标识，连接在总线上的终端均可以接收到信息，根据目标地址判断是否和自己匹配，若是则接收，否则丢弃
    * 先导码：为使接收端确定位同步，7字节10101010组成的一组编码
    * 帧开始分解符：为使接收端确定位同步，1字节10101011组成的一组编码
    * 数据长度称为MAC帧的净荷字段为46~1500个字节
    * FCS:检验MAC帧在传输过程中是否出错；

>净荷字段设置上限原因:
<br/> 一是接收端的缓存空间是有限的,每次发送的数据不能太长;
<br/> 二是发送数据太长的话,一旦发送失败,损失很大;
<br/> 三是每个终端不能一次占用时间太长

## 公平竞争总线：
* CSMA/CD算法:Carrie Sense Multiple Access with Collision Detection,载波侦听、多点接入和冲突检测
    * 载波侦听:检测总线上是否有载波
    * 多点接入:指可以有多个终端连接到总线上
    * 冲突检测:检测总线上是否发生冲突

### CSMA/CD工作步骤
* 1.侦听总线上是否有载波
* 2.若总线有载波等待帧间最小间隔,返回1，继续侦听
* 3.直到检测到总线无载波才能发送数据,发送完成继续侦听，若检测到冲突则发出阻塞信号，按后退策略延迟后，返回1
* 4.无冲突则继续发送，直至结束


* 设置帧间最小间隔的目的:
    * 留出时间让接收终端腾出缓冲空间
    * 避免一个终端连续发送多个MAC帧
    * 让终端正确监测到先导码和帧开始分界符



#### 后退算法

* 后退算法要求:
    * 1、每一个终端生成的延迟时间都是随机的,且相互独立
    * 2、最小的延迟时间最好为0,而且只有一个为0
    * 3、所有终端的平均延迟时间尽可能小

* 后退算法步骤：
    * 1.K为冲突次数。初始时K=0,每发生一次冲突,K就加1,但K不能超过10,因此,K=MIN[冲突次数,10]。
    * 2.从整数集合[0,1,...,2 K -1]中随机选择某个整数r。
    * 3.根据r,计算出后退时间T=r×t(t: 协议规定的时间,不同传输速率t不同 )
    * 4.如果某个终端连续重传了16次都检测到冲突发生,则终止传输,并向高层协议报告

优点：自适应，少量终端发生冲突,减少终端平均延迟时间/大量终端发生冲突,不断增大整数集合


### CSMA/CD算法缺陷：
* CSMA/CD只适应轻负荷:
    * 网络负荷为某一时间段内连接在总线上的终端需要通过总线发送的数据总量，高负荷情况下，冲突较为频繁，等待时间增加，造成总线的利用率非常低、

* CSMA/CD算法存在捕获效应:
    * 捕获效应：如果两个终端都想连续发送数据，一个终端长时间内一直争到总线发送数据，另一个终端长时间内一直争不到总线发送数据

* 冲突域直径与最短帧长之间的制约:
    * 无中继器情况下,t和R之间的关系R=t×(2/3)C，(C为光速,C=3×10 8 m/s)
> 如果终端B开始发送数据,在终端B立即发生冲突,终端B立即检测到冲突,但终端A检测不到，终端A在终端B发生冲突后,经过 t时间,才能检测到冲突发生这就意味着终端A发送一帧MAC帧的时间大于等于2t时,才能检测到这种情况下发生的冲突。因此，如果冲突域直径为t,终端A每一帧的发送时间必须大于等于2t
* 最短帧长：发送时间为2t的MAC帧长度称为最短帧长Lmin=2txS(Lmin:最短帧长/t:冲突域直径/S:终端发送速率）