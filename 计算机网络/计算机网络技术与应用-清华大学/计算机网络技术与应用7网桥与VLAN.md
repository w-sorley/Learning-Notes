---
title: 网络技术与基础6以太网
date: 2017-05-03
tags: [计算机网络,MOOC]
categories:　MOOC学习总结
---

# 网络技术与基础6以太网
<br/>   －-总结自<学堂在线>清华大学.网路技术与基础课程学习



## 网桥分割冲突域
* 分割冲突域的基本原理：把大的以太网分割为若干个小的冲突域,让每个冲突域里的终端数量减少,距离缩短。然后用网桥把这些冲突域连接起来。
> 为解决以太网带来的缺陷，因此减少终端，缩小冲突域直径
* 网桥功能：隔断电信号，转发MAC帧
* 转发表:每一项包含目的MAC地址和端口号，在运行中自学习建立更新

### 网桥工作流程：
* 1.根据需要传输的MAC帧，在转发表中查找目的MAC地址
* 2.若没有找到目的MAC地址对应的转发项，则向除本接收端口以外的所有端口广播MAC帧，后跳到7
* 3.若在转发表中找到对应的MAC帧的转发项，则判断对应的目的端口是否为本端口
* 4.若对应的目的端口为本端口则丢弃，，后跳到7
* 6.若对应的目的端口不是本端口，则通过对应的目的端口转发MAC帧，后跳到7
* 7.判断转发表中是否存在MAC帧的源地址
* 8.若转发表中存在MAC帧的源地址，则更新传送方向以及定时器，结束；
* 9.若转发表中不存在MAC帧的源地址，则把源地址和传送方向添加到转发表中并设置定时器，结束；
> (找不到则广播，找到且不同则转发,转发表自适应建立更新)

## VLAN广播域分割
* 广播域是指所有网桥以广播方式输出MAC帧时,MAC帧遍历的网络范围。
* 广播缺点：浪费网络链路带宽和网桥、终端的处理能力，同时引发安全问题，但不可避免(可利用VLAN缩小广播范围，具有物理位置无关性和动态性)
* VLAN：划分物理以太网产生的每一个广播域等同于一个逻辑上独立的以太网,由于这些逻辑上独立的以太网存在于同一个物理以太网中,因而被称为虚拟局域网(Virtual LAN,VLAN)

### VLAN特性
* 划分VLAN时无需改变已有以太网的物理结构。
* 可以在不改变以太网物理结构的前提下,改变VLAN的数量及属于每一个VLAN的终端。
* 属于每一个VLAN的终端与该终端在物理以太网中的位置无关
### VLAN的划分过程
* 确定属于每一个VLAN的交换机端口
* 在属于相同VLAN的端口之间生成交换路径
> 完成VLAN的划分后,交换机能够确定接收到的MAC帧所属的VLAN并在它所属的VLAN内转发

* 交换机:在网桥的基础(具有地址学习、MAC帧转发等分组交换功能)上，增加了VLAN划分及其他一些增强网络性能的功能的设备
> 以交换机为分组交换设备构建的以太网称为交换式以太网

### 跨交换机VLAN划分

* 将物理以太网中不同交换机中的任意端口组合分配到某个VLAN中
* 建立这些交换机端口之间的交换路径

#### 端口配置原则
* 允许将属于不同交换机的多个端口分配到同一个VLAN
* 必须保证任何两个属于同一VLAN的端口之间存在交换路径

#### 存在问题:
* 一是交换机端口浪费,每个跨交换机的VLAN都要有两个端口用来建立交换机之间的交换路径;
* 二是交换机之间的物理链路数量是不确定的,随着跨交换机VLAN数量的变化而变化。



## 802.1Q:
* 通过共享端口减少两交换机的物理链路，但是当终端A向终端D发送MAC帧时,交换机2通过端口1接收该MAC帧, 由于交换机2端口1是共享端口,交换机2无法根据接收该MAC帧的端口确定该MAC帧所属的VLAN。
* 在MAC帧中加入VLAN标识：目的地址+源地址+VLAN标记+(8100H,VLAN ID)+类型+数据+FCS


确定MAC帧所属VLAN规则

#### 端口分类
* 共享端口:同时属于多个VLAN
* 接入端口:只属于单个VLAN
* 混合端口:具有共享端口和接入端口双重功能

* 共享端口:
<br/> MAC帧需要携带VLAN标识符
<br/> 携带的VLAN标识符与共享端口所属的VLAN范围一致
<br/> 根据MAC帧携带的VLAN标识符确定该MAC帧所属的VLAN


* 接入端口:
<br/> MAC帧不能携带VLAN标识符
<br/> 根据输入MAC帧的端口确定该MAC帧所属VLAN

* 混合端口
<br/> 对于携带VLAN标识符的MAC帧,且携带的VLAN标识符与共享端口所属的VLAN范围一致,根据MAC帧携带的VLAN标识符确定该MAC帧所属的VLAN
<br/> 对于没有携带VLAN标识符的MAC帧,根据输入MAC帧的端口确定该MAC帧所属的VLAN
